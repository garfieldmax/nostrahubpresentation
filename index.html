<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nostra — Coordinating Sovereign Builders</title>
  <meta name="description" content="Three core ideas of Nostra, revealed as you explore.">
  <meta property="og:title" content="Nostra — Coordinating Sovereign Builders">
  <meta property="og:description" content="Three core ideas of Nostra, revealed as you explore.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://nostra.vercel.app/">
  <meta property="og:image" content="https://nostra.vercel.app/assets/nostra-logo.webp">
  <link rel="preload" href="/assets/nostra-logo.webp" as="image" type="image/webp">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%231aa0e6'/%3E%3Ctext x='32' y='41' text-anchor='middle' font-family='sans-serif' font-size='32' fill='white'%3EN%3C/text%3E%3C/svg%3E">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <a class="sr-only" href="#content">Skip to slices</a>
  <main id="content" class="stage" aria-label="Nostra key ideas">
    <div class="logo-backdrop">
      <img src="/assets/nostra-only.png" alt="Nostra logo">
    </div>
    <nav class="mobile-slice-menu" aria-label="Slide menu">
      <button type="button" class="mobile-slice-menu__item" data-slice-target="one" aria-pressed="false">
        <span class="slice__eyebrow">Protocol</span>
      </button>
      <button type="button" class="mobile-slice-menu__item" data-slice-target="two" aria-pressed="false">
        <span class="slice__eyebrow">Agizens</span>
      </button>
      <button type="button" class="mobile-slice-menu__item" data-slice-target="three" aria-pressed="false">
        <span class="slice__eyebrow">Engine</span>
      </button>
    </nav>
    <section class="slices" aria-label="Explore the three pillars">
      <article class="slice slice--one" tabindex="0" data-slice="one">
        <figure class="slice__image">
          <img src="/assets/slide1-plant.png" alt="Hands exchanging a plant" loading="lazy">
        </figure>
        <div class="slice__scrim"></div>
        <div class="slice__content">
          <span class="slice__eyebrow">Protocol of Agreements</span>
          <p>Voluntary, binding commitments with transparent guarantees.</p>
        </div>
      </article>
      <article class="slice slice--two" tabindex="0" data-slice="two">
        <figure class="slice__image">
          <img src="/assets/slide2-room.jpg" alt="Communal gathering room" loading="lazy">
        </figure>
        <div class="slice__scrim"></div>
        <div class="slice__content">
          <span class="slice__eyebrow">Agizens &amp; Coordination</span>
          <p>Human + AI citizens collaborating with accountable autonomy.</p>
        </div>
      </article>
      <article class="slice slice--three" tabindex="0" data-slice="three">
        <figure class="slice__image">
          <img src="/assets/slide3-engine.webp" alt="Economic engine visual" loading="lazy">
        </figure>
        <div class="slice__scrim"></div>
        <div class="slice__content">
          <span class="slice__eyebrow">Economic Engine</span>
          <p>Energy-in, value-out—tools that fund the future we’re building.</p>
        </div>
      </article>
    </section>
  </main>
  <footer class="site-footer">
    <small>© 2024 Nostra. <a href="mailto:maxb@nostrahub.com">maxb@nostrahub.com</a></small>
  </footer>
  <script>
    (function () {
      const root = document.documentElement;
      const slices = Array.from(document.querySelectorAll('.slice'));
      const menuItems = Array.from(document.querySelectorAll('.mobile-slice-menu__item'));
      const container = document.querySelector('.slices');
      const coarseQuery = window.matchMedia('(pointer: coarse)');
      let isCoarsePointer = coarseQuery.matches;
      let activeSliceId = null;

      function activateSlice(id) {
        if (id) {
          root.setAttribute('data-active-slice', id);
        } else {
          root.removeAttribute('data-active-slice');
        }
        activeSliceId = id || null;

        menuItems.forEach((item) => {
          const isActive = item.dataset.sliceTarget === id;
          item.classList.toggle('is-active', isActive);
          item.setAttribute('aria-pressed', isActive ? 'true' : 'false');
        });
      }

      function toggleSlice(id) {
        if (activeSliceId === id) {
          if (isCoarsePointer) {
            return;
          }

          activateSlice(null);
        } else {
          activateSlice(id);
        }
      }

      function handleCoarseChange(event) {
        isCoarsePointer = event.matches;
        if (!isCoarsePointer) {
          activateSlice(null);
        }
      }

      if (typeof coarseQuery.addEventListener === 'function') {
        coarseQuery.addEventListener('change', handleCoarseChange);
      } else if (typeof coarseQuery.addListener === 'function') {
        coarseQuery.addListener(handleCoarseChange);
      }

      slices.forEach((slice) => {
        const id = slice.dataset.slice;

        slice.addEventListener('mouseenter', () => activateSlice(id));
        slice.addEventListener('mouseleave', () => {
          if (!isCoarsePointer) {
            activateSlice(null);
          }
        });

        slice.addEventListener('focus', () => activateSlice(id));
        slice.addEventListener('blur', () => {
          requestAnimationFrame(() => {
            if (!slices.some((item) => item.matches(':focus'))) {
              activateSlice(null);
            }
          });
        });

        slice.addEventListener('click', (event) => {
          if (!isCoarsePointer) {
            return;
          }

          if (event.detail === 0) {
            activateSlice(id);
            return;
          }

          toggleSlice(id);
        });
      });

      menuItems.forEach((item) => {
        const id = item.dataset.sliceTarget;

        item.addEventListener('click', () => {
          toggleSlice(id);

          if (!isCoarsePointer) {
            const slice = document.querySelector(`.slice[data-slice="${id}"]`);
            if (slice && typeof slice.scrollIntoView === 'function') {
              slice.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          }
        });
      });

      container?.addEventListener('mouseleave', () => {
        if (!isCoarsePointer) {
          activateSlice(null);
        }
      });

      container?.addEventListener('click', (event) => {
        if (!isCoarsePointer) {
          return;
        }

        if (!event.target.closest('.slice')) {
          activateSlice(null);
        }
      });

      document.addEventListener('click', (event) => {
        if (!isCoarsePointer) {
          return;
        }

        if (!event.target.closest('.slice') && !event.target.closest('.mobile-slice-menu')) {
          activateSlice(null);
        }
      });

      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          activateSlice(null);
        }
      });
    })();
  </script>
</body>
</html>
